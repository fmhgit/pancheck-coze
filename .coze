[project]
entrypoint = "pancheck/bin/main"
requires = ["go"]

[dev]
build = ["bash", "-c", "cd pancheck && GOPROXY=https://goproxy.cn,direct go build -o bin/main ./cmd/api"]
run = ["bash", "-c", "cd pancheck && ./bin/main"]

[deploy]
build = ["bash", "-c", "cd pancheck && if ! command -v go &> /dev/null; then wget -q https://go.dev/dl/go1.23.5.linux-amd64.tar.gz -O /tmp/go.tar.gz && tar -C /usr/local -xzf /tmp/go.tar.gz && export PATH=$PATH:/usr/local/go/bin && rm /tmp/go.tar.gz; fi && export PATH=$PATH:/usr/local/go/bin && GOPROXY=https://goproxy.cn,direct go build -o bin/main ./cmd/api"]
run = ["bash", "-c", "cd pancheck && export PATH=$PATH:/usr/local/go/bin && ./bin/main"]
